<!DOCTYPE html>
<html>

  <head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <link rel="stylesheet" type="text/css" href="suntimes.css">
    <title>IFTTT Sunrise/Sunset Event Generator</title>

    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD-t0PKWwRk8S6-mxpe-0UAXLBBHyXUfLE">
    </script>

    <script src="suntimes-client.js"></script>
  </head>
  <body>


    <div id="wrapper">
      <div id="content">
        <div class="title">IFTTT Sunrise/Sunset Event Generator</div>

        <div id="key-group">

          <div class="group maker-intro">Maker Key:</div>
          <form class="group form-text">
            <input id="key-input" type="text"></input>
          </form>
          <button class="group" id="key-lookup-button">Lookup</button>


        </div>
        <div id="key-exists">

          <div id="sunrise-group">
            <div class="group sun-intro">Next sunrise is:</div>
            <div class="group time-text" id="sunrise"></div>
            <button class="group" id="test-sunrise-button">Test</button>
          </div>

          <div id="sunset-group">
            <div class="group sun-intro">Next sunset is:</div>
            <div class="group time-text" id="sunset"></div>
            <button class="group" id="test-sunset-button">Test</button>
          </div>

          <div id="change-location-group">
            <button class="group" id="change-location-button">Change Location</button>
          </div>

          <div id="link-group">
            <div class="group smaller">Permalink: </div>
            <div class="group smaller" id="permalink"></div>
          </div>

        </div>

        <div id="no-key">
          <div  class="group maker-intro" id="postcode">UK Postcode:</div>
          <form class="group form-text">
            <input id="postcode-input" type="text"></input>
          </form>
          <button class="group" id="postcode-button">Add</button>
        </div>


      </div>




      <div id="sidebar">
        <div id="map"></div>
        <div id="location"></div>
      </div>
      <div id="cleared"></div>
    </div>

    <div id="wrapper2">
      <div id="help">Click for Help</div>
      <div id="help-panel">
        <h3>How to connect:</h3>
        <ol>
          <li>Go to <a href="https://ifttt.com/maker" target="_blank">IFTTT Maker</a> and connect it to your IFTTT account</li>
          <li>Click the 'settings' cog in the top right of the maker screen</li>
          <li>Make a note of your 'Maker Key'.  The maker key is the text in the URL part of the screen.  You only need the last bit.  So for example if the URL is:  <pre>https://maker.ifttt.com/use/xyZvZHbPdm3zVOjip5H99a</pre> then the maker id is: <pre>xyZvZHbPdm3zVOjip5H99a</pre></li>
          <li>Create two Maker applets in IFTTT.  The first one should have an (all lower case) event name of: <pre>sunrise</pre>  The second should have an event name of:<pre>sunset</pre> Wire them up to trigger whatever, for e.g. turn on a light at sunset.</li>
          <li>Put the Maker Key into the box above</li>
          <li>Enter your UK postcode</li>
          <li>Test the events are wired up correctly by clicking the 'Test' buttons</li>
          <li>Wait!</li>
        </ol>
      </div>

    </div>



  </body>
</html>
